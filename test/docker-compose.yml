version: "2"

services:

  child:
    build:
      context: .
      dockerfile: Dockerfile
    depends_on:
     - parent
    links:
     - db:database
    expose:
     - 80
    environment:
     - ORACLEDB_CONNECTIONSTRING='database:1521/xe'
     - ORACLEDB_USER='system'
     - ORACLEDB_PASSWORD='oracle'
    command: npm start
    

# https://hub.docker.com/r/wnameless/oracle-x-11g/
  db:
    image: wnameless/oracle-xe-11g
    expose:
      - "1521"


  parent:
    build:
      context: ..
      dockerfile: Dockerfile      
